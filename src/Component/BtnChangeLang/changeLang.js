import React, {useContext, createContext, useState, useRef} from 'react'
import {useTranslation} from 'react-i18next'
import {useConfigContext} from '../NavBar/navBar'
import {v4 as uuidv4} from 'uuid'
import useGlobalContext from '../../containerContext/storeContext'

/**
 * props defiend
 * list : list menu item
 *       -label: display item UI
 *       -value: value get when trigger action
 *       -id: id of item menu
 *
 * iconLeft:
 * iconRight:
 * callBack action when trigger
 */
export const dark_world_icon = (
  <svg
    width="18"
    height="18"
    viewBox="0 0 18 18"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M9 0C4.04402 0 0 4.04473 0 9C0 13.956 4.0449 18 9 18C13.9288 18 18 13.9756 18 9C18 4.04395 13.9551 0 9 0ZM6.32999 1.51675C5.90699 2.05727 5.57149 2.67655 5.30501 3.30296C4.93791 3.10897 4.58532 2.88559 4.25067 2.63412C4.8787 2.16436 5.57849 1.78569 6.32999 1.51675ZM3.43406 3.33601C3.90421 3.70867 4.40771 4.03123 4.93678 4.30028C4.53878 5.55244 4.3065 6.97968 4.26206 8.47266H1.07262C1.2047 6.46731 2.08389 4.66302 3.43406 3.33601ZM1.07262 9.52734H4.26206C4.30647 11.0203 4.53878 12.4475 4.93678 13.6997C4.40771 13.9688 3.90421 14.2913 3.43406 14.664C2.08389 13.337 1.2047 11.5327 1.07262 9.52734ZM4.25067 15.3659C4.58532 15.1144 4.93794 14.891 5.30501 14.697C5.38112 14.8759 5.46089 15.0501 5.54467 15.2185C5.78373 15.6994 6.04709 16.1217 6.32999 16.4833C5.57849 16.2143 4.8787 15.8356 4.25067 15.3659ZM8.47266 16.8551C7.74967 16.6101 7.04767 15.8726 6.48911 14.749C6.4119 14.5937 6.33843 14.433 6.26836 14.2676C6.97293 14.0085 7.71469 13.8494 8.47266 13.7989V16.8551ZM8.47266 12.7426C7.5909 12.7944 6.72771 12.9755 5.90882 13.2762C5.56288 12.1521 5.35939 10.872 5.31714 9.52734H8.47266V12.7426ZM8.47266 8.47266H5.31714C5.35939 7.128 5.56288 5.84793 5.90882 4.72384C6.72771 5.02453 7.5909 5.20562 8.47266 5.25741V8.47266ZM8.47266 4.2011C7.71469 4.15062 6.97293 3.9915 6.26836 3.73236C6.69449 2.72672 7.43864 1.49537 8.47266 1.1449V4.2011ZM16.9274 8.47266H13.7379C13.6935 6.97968 13.4612 5.55247 13.0632 4.30028C13.5923 4.03123 14.0958 3.70867 14.5659 3.33601C15.9161 4.66302 16.7953 6.46731 16.9274 8.47266ZM13.7493 2.63412C13.4147 2.88559 13.0621 3.10897 12.695 3.30296C12.4285 2.67652 12.093 2.05724 11.67 1.51675C12.4215 1.78569 13.1213 2.16436 13.7493 2.63412ZM9.52734 1.1449C10.5614 1.49537 11.3055 2.72675 11.7316 3.73236C11.0271 3.9915 10.2853 4.15062 9.52734 4.2011V1.1449ZM9.52734 5.25741C10.4091 5.20562 11.2723 5.02453 12.0912 4.72384C12.4371 5.84793 12.6406 7.128 12.6829 8.47266H9.52734V5.25741ZM9.52734 9.52383H12.6829C12.6406 10.8685 12.4371 12.1521 12.0912 13.2762C11.2723 12.9755 10.4091 12.7944 9.52734 12.7426V9.52383ZM9.52734 16.8551V13.7989C10.2853 13.8494 11.0271 14.0085 11.7316 14.2676C11.6616 14.433 11.5881 14.5938 11.5109 14.749C10.9523 15.8726 10.2503 16.6101 9.52734 16.8551ZM11.67 16.4833C11.9529 16.1217 12.2163 15.6994 12.4553 15.2185C12.5391 15.0501 12.6189 14.8759 12.695 14.697C13.0621 14.891 13.4147 15.1144 13.7493 15.3659C13.1213 15.8356 12.4215 16.2143 11.67 16.4833ZM14.5659 14.664C14.0958 14.2913 13.5923 13.9688 13.0632 13.6997C13.4612 12.4476 13.6935 11.0168 13.7379 9.52383H16.9274C16.7953 11.5292 15.9161 13.337 14.5659 14.664Z"
      fill="#4B708F"
    />
  </svg>
)
export const light_world_icon = (
  <svg
    width="18"
    height="18"
    viewBox="0 0 18 18"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
  >
    <path
      d="M9 0C4.04402 0 0 4.04473 0 9C0 13.956 4.0449 18 9 18C13.9288 18 18 13.9756 18 9C18 4.04395 13.9551 0 9 0ZM6.32999 1.51675C5.90699 2.05727 5.57149 2.67655 5.30501 3.30296C4.93791 3.10897 4.58532 2.88559 4.25067 2.63412C4.8787 2.16436 5.57849 1.78569 6.32999 1.51675ZM3.43406 3.33601C3.90421 3.70867 4.40771 4.03123 4.93678 4.30028C4.53878 5.55244 4.3065 6.97968 4.26206 8.47266H1.07262C1.2047 6.46731 2.08389 4.66302 3.43406 3.33601ZM1.07262 9.52734H4.26206C4.30647 11.0203 4.53878 12.4475 4.93678 13.6997C4.40771 13.9688 3.90421 14.2913 3.43406 14.664C2.08389 13.337 1.2047 11.5327 1.07262 9.52734ZM4.25067 15.3659C4.58532 15.1144 4.93794 14.891 5.30501 14.697C5.38112 14.8759 5.46089 15.0501 5.54467 15.2185C5.78373 15.6994 6.04709 16.1217 6.32999 16.4833C5.57849 16.2143 4.8787 15.8356 4.25067 15.3659ZM8.47266 16.8551C7.74967 16.6101 7.04767 15.8726 6.48911 14.749C6.4119 14.5937 6.33843 14.433 6.26836 14.2676C6.97293 14.0085 7.71469 13.8494 8.47266 13.7989V16.8551ZM8.47266 12.7426C7.5909 12.7944 6.72771 12.9755 5.90882 13.2762C5.56288 12.1521 5.35939 10.872 5.31714 9.52734H8.47266V12.7426ZM8.47266 8.47266H5.31714C5.35939 7.128 5.56288 5.84793 5.90882 4.72384C6.72771 5.02453 7.5909 5.20562 8.47266 5.25741V8.47266ZM8.47266 4.2011C7.71469 4.15062 6.97293 3.9915 6.26836 3.73236C6.69449 2.72672 7.43864 1.49537 8.47266 1.1449V4.2011ZM16.9274 8.47266H13.7379C13.6935 6.97968 13.4612 5.55247 13.0632 4.30028C13.5923 4.03123 14.0958 3.70867 14.5659 3.33601C15.9161 4.66302 16.7953 6.46731 16.9274 8.47266ZM13.7493 2.63412C13.4147 2.88559 13.0621 3.10897 12.695 3.30296C12.4285 2.67652 12.093 2.05724 11.67 1.51675C12.4215 1.78569 13.1213 2.16436 13.7493 2.63412ZM9.52734 1.1449C10.5614 1.49537 11.3055 2.72675 11.7316 3.73236C11.0271 3.9915 10.2853 4.15062 9.52734 4.2011V1.1449ZM9.52734 5.25741C10.4091 5.20562 11.2723 5.02453 12.0912 4.72384C12.4371 5.84793 12.6406 7.128 12.6829 8.47266H9.52734V5.25741ZM9.52734 9.52383H12.6829C12.6406 10.8685 12.4371 12.1521 12.0912 13.2762C11.2723 12.9755 10.4091 12.7944 9.52734 12.7426V9.52383ZM9.52734 16.8551V13.7989C10.2853 13.8494 11.0271 14.0085 11.7316 14.2676C11.6616 14.433 11.5881 14.5938 11.5109 14.749C10.9523 15.8726 10.2503 16.6101 9.52734 16.8551ZM11.67 16.4833C11.9529 16.1217 12.2163 15.6994 12.4553 15.2185C12.5391 15.0501 12.6189 14.8759 12.695 14.697C13.0621 14.891 13.4147 15.1144 13.7493 15.3659C13.1213 15.8356 12.4215 16.2143 11.67 16.4833ZM14.5659 14.664C14.0958 14.2913 13.5923 13.9688 13.0632 13.6997C13.4612 12.4476 13.6935 11.0168 13.7379 9.52383H16.9274C16.7953 11.5292 15.9161 13.337 14.5659 14.664Z"
      fill="#00e5b9"
    />
  </svg>
)

export default function SimpleSelect({...rest}) {
  const [state, dispatch] = useGlobalContext()
  const {lang, onChangeLanguage} = useConfigContext()
  // const lang = state.lang;
  const status = state.isLogin
  const [isShowMenu, changeShowMenu] = useState(false)
  const list = [
    {
      label: 'VI',
      value: 'vi',
      id: 'vi-lang-option',
    },
    {
      label: 'EN',
      value: 'en',
      id: 'en-lang-option',
    },
  ]
  const handleChange = value => {
    if (!value) return
    dispatch({type: 'CHANGE_LANG', payload: value})
    onChangeLanguage(value)
    changeShowMenu(false)
  }
  const onMouseEnterWrap = event => {
    changeShowMenu(true)
  }
  const onMouseLeaveWrap = event => {
    changeShowMenu(false)
  }
  return (
    <div
      className={!status ? 'group-change-lang-dark' : 'group-change-lang-light'}
      onMouseEnter={onMouseEnterWrap}
      onMouseLeave={onMouseLeaveWrap}
    >
      {light_world_icon}
      {/* {!status ? dark_world_icon : light_world_icon} */}
      <div
        className={
          isShowMenu
            ? 'upos-show-item change-language-option upos-shadow'
            : 'upos-hide-item change-language-option upos-shadow'
        }
        // className={'upos-show-item change-language-option upos-shadow'}
      >
        {list.map((item, index) => {
          let itemClass = 'dropdown-items-lang'
          if (lang === item.value) itemClass += ' dropdown-item-lang-active'
          if (item.customItemClass)
            itemClass = `${itemClass} ${item.customItemClass}`
          return (
            <div
              key={index}
              className={itemClass}
              onClick={() => handleChange(item.value)}
            >
              <div className="icon-lang">{light_world_icon}</div>
              {/* <div className="icon-lang">{!status ? dark_world_icon : light_world_icon}</div> */}
              <div className="text-lang upos-text">{item.label}</div>
            </div>
          )
        })}
      </div>
    </div>
  )
}
